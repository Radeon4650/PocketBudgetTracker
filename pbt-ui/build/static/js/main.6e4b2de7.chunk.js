(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,n){e.exports=n(314)},174:function(e,t,n){},176:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(43),r=n.n(o),c=(n(174),n(44)),i=n(45),u=n(47),s=n(46),m=n(48),g=n(20),d=(n(176),n(178),n(327)),h=n(140),E=n(326),b=n(323),v=n(49),p=n(328),f=n(329),C=n(322),y=n(330),O=n(324);var j=function(e){var t=e.onLoginClick,n=e.onUserCreateClick,a=e.onUserNameChange,o=e.onEmailChange,r=e.onPasswordChange;return l.a.createElement(p.a,{placeholder:!0},l.a.createElement(f.a,{columns:2,stackable:!0,textAlign:"center"},l.a.createElement(C.a,{vertical:!0},"Or"),l.a.createElement(f.a.Row,{verticalAlign:"middle"},l.a.createElement(f.a.Column,null,l.a.createElement(y.a,{icon:!0},l.a.createElement(h.a,{name:"sign in"}),"Log In"),l.a.createElement(O.a,{onSubmit:t},l.a.createElement(O.a.Field,null,l.a.createElement("label",null,"User Email"),l.a.createElement(O.a.Input,{name:"email",placeholder:"User Email",onChange:a})),l.a.createElement(O.a.Field,null,l.a.createElement("label",null,"Password"),l.a.createElement(O.a.Input,{name:"pass",placeholder:"Password",onChange:r})),l.a.createElement(d.a,{type:"submit"},"Log in"))),l.a.createElement(f.a.Column,null,l.a.createElement(y.a,{icon:!0},l.a.createElement(h.a,{name:"user"}),"Create a new user"),l.a.createElement(O.a,{onSubmit:n},l.a.createElement(O.a.Field,null,l.a.createElement("label",null,"User Name"),l.a.createElement(O.a.Input,{name:"username",placeholder:"User Name",onChange:a})),l.a.createElement(O.a.Field,null,l.a.createElement("label",null,"Email"),l.a.createElement(O.a.Input,{name:"email",placeholder:"User Email",onChange:o})),l.a.createElement(O.a.Field,null,l.a.createElement("label",null,"Password"),l.a.createElement(O.a.Input,{name:"pass",placeholder:"Password",onChange:r})),l.a.createElement(d.a,{type:"submit"},"Create"))))))},I=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={loggedIn:void 0,username:void 0,email:void 0,pass:void 0},n.onLoggedIn=e.onLoggedIn,n.onLoggedOut=e.onLoggedOut,n.logIn=n.logIn.bind(Object(g.a)(Object(g.a)(n))),n.createUser=n.createUser.bind(Object(g.a)(Object(g.a)(n))),n.getCurrentUser=n.getCurrentUser.bind(Object(g.a)(Object(g.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getCurrentUser()}},{key:"getCurrentUser",value:function(){var e=this;fetch("/api/auth/login",{redirect:"error"}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({loggedIn:!0,email:t.username},function(){return e.onLoggedIn(t)})}).catch(function(t){console.log(t),e.setState({loggedIn:!1},function(){return e.onLoggedOut()})})}},{key:"logIn",value:function(){var e=this,t={login:this.state.email,password:this.state.pass},n={method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},redirect:"error",body:JSON.stringify(t)};fetch("/api/auth/login",n).then(function(e){return e.blob()}).then(function(t){console.log(t),e.getCurrentUser()}).catch(function(t){console.error(t),e.getCurrentUser()})}},{key:"createUser",value:function(){var e=this,t={username:this.state.username,email:this.state.email,password:this.state.pass},n={method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};fetch("/api/auth/create",n).then(function(e){return e.blob()}).then(function(t){console.log(t),e.logIn()}).catch(function(t){console.error(t),e.setState({loggedIn:!1})})}},{key:"render",value:function(){var e=this;return l.a.createElement(j,{onLoginClick:this.logIn,onUserCreateClick:this.createUser,onUserNameChange:function(t,n){var a=n.name,l=n.value;return e.setState(Object(v.a)({},a,l))},onEmailChange:function(t,n){var a=n.name,l=n.value;return e.setState(Object(v.a)({},a,l))},onPasswordChange:function(t,n){var a=n.name,l=n.value;return e.setState(Object(v.a)({},a,l))}})}}]),t}(a.Component),w=n(325);var k=function(e){return l.a.createElement("div",null,e.budgets.categories?e.budgets.categories.map(function(e){return l.a.createElement(w.a,{key:e.id,celled:!0},l.a.createElement(w.a.Header,null,l.a.createElement(w.a.Row,null,l.a.createElement(w.a.HeaderCell,{textAlign:"center",colSpan:"4"},e.name)),l.a.createElement(w.a.Row,null,l.a.createElement(w.a.HeaderCell,null,"Number"),l.a.createElement(w.a.HeaderCell,null,"Date"),l.a.createElement(w.a.HeaderCell,null,"Title"),l.a.createElement(w.a.HeaderCell,null,"Amount"))),l.a.createElement(w.a.Body,null,e.items.map(function(e){return l.a.createElement(w.a.Row,{key:e.id},l.a.createElement(w.a.Cell,null,e.id),l.a.createElement(w.a.Cell,null,e.date),l.a.createElement(w.a.Cell,null,e.title),l.a.createElement(w.a.Cell,null,"".concat(e.amount,"  ").concat(e.currency)))})))}):l.a.createElement("pre",null,"You have no entries in your budget"))};var S=function(e){var t=e.onValueChange,n=e.onSubmit;return l.a.createElement(p.a,{color:"olive"},l.a.createElement("h3",null,"Add entry"),l.a.createElement(O.a,{size:"mini",onSubmit:n},l.a.createElement(O.a.Group,{inline:!0},l.a.createElement(O.a.Field,null,l.a.createElement(O.a.Input,{name:"category",placeholder:"Enter category",onChange:t})),l.a.createElement(O.a.Field,null,l.a.createElement(O.a.Input,{name:"title",placeholder:"Enter title",onChange:t})),l.a.createElement(O.a.Field,null,l.a.createElement(O.a.Input,{name:"amount",placeholder:"Enter amount",onChange:t})),l.a.createElement(O.a.Field,null,l.a.createElement(O.a.Button,{type:"submit"},"Submit")))))},U=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={category:void 0,date:void 0,title:void 0,amount:void 0,currency:"UAH",budgets:[]},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getBudgets(),this.addEntry=this.addEntry.bind(this),this.valueChange=this.valueChange.bind(this)}},{key:"getBudgets",value:function(){var e=this;fetch("/api/budget").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({budgets:t})}).catch(function(e){console.log(e)})}},{key:"addEntry",value:function(){var e=this;console.log(this.state);var t={category:this.state.category,date:(new Date).toISOString(),title:this.state.title,amount:this.state.amount,currency:this.state.currency},n={method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};fetch("/api/budget",n).then(function(e){return e.blob()}).then(function(t){console.log(t),e.getBudgets()}).catch(function(e){console.error(e)})}},{key:"valueChange",value:function(e,t){var n=t.name,a=t.value;this.setState(Object(v.a)({},n,a))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(S,{onValueChange:this.valueChange,onSubmit:this.addEntry}),l.a.createElement(k,{budgets:this.state.budgets}))}}]),t}(a.Component),L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={loggedIn:void 0,username:void 0,email:void 0,pass:void 0},n.logOut=n.logOut.bind(Object(g.a)(Object(g.a)(n))),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"logOut",value:function(){var e=this;console.log("Logging out"),fetch("/api/auth/logout").then(function(e){return e.blob()}).then(function(t){console.log(t),e.setState({loggedIn:!1,username:void 0,pass:void 0})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this,t=this.state.loggedIn,n=l.a.createElement(d.a,{inverted:!0,color:"red",icon:!0,labelPosition:"right",onClick:this.logOut},"Log Out",l.a.createElement(h.a,{name:"sign out"}));return l.a.createElement("div",null,l.a.createElement(E.a,{fixed:"top",inverted:!0},l.a.createElement(E.a.Menu,null),l.a.createElement(E.a.Menu,{position:"right"},this.state.loggedIn&&l.a.createElement(E.a.Item,null,n))),l.a.createElement(b.a,{style:{marginTop:"5em",marginBottom:"5em"}},t?l.a.createElement("div",null,l.a.createElement("h1",null,"Hello ",this.state.username),l.a.createElement(U,null)):l.a.createElement(I,{onLoggedIn:function(t){console.log("Logged In: ",t),e.setState({loggedIn:!0,username:t.username})},onLoggedOut:function(){console.log("Logged out..."),e.setState({loggedIn:!1})}})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[169,2,1]]]);
//# sourceMappingURL=main.6e4b2de7.chunk.js.map